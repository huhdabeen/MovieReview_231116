<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "//mybatis.org//DTD Config 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.hk.mboard.mapper.BoardMapper">

	<resultMap type="boardDto" id="boardDtoMap">
		<id property="board_seq" 	column="BOARD_SEQ" />
		<id property="name" 		column="NAME" />
		<id property="title" 		column="TITLE" />
		<id property="content" 		column="CONTENT" />
		<id property="regdate" 		column="REGDATE" />
		
		<collection property="miBoardDto" resultMap="miBoardDtoMap"></collection>
	</resultMap>
	
	<resultMap type="miBoardDto" id="miBoardDtoMap">
		<id property="movie_seq" 		column="MOVIE_SEQ" />
		<result property="movie_nm" 	column="MOVIE_NM"/>
		<result property="opn" 			column="OPN"/>
		<result property="nlty_nm" 		column="NLTY_NM"/>
		<result property="genre_nm" 	column="GENRE_NM"/>
		<result property="grad_nm" 		column="GRAD_NM"/>
	</resultMap>

	<select id="getAllList" resultType="boardDto">
		SELECT BOARD_SEQ, GENRE_NM, MOVIE_NM, TITLE, CONTENT,NAME, REGDATE
		FROM RVBOARD
		WHERE DELFLAG='N' AND SPOFLAG='N'
		ORDER BY REGDATE DESC
	</select>
	
	<select id="getBoard" parameterType="Integer" resultMap="boardDtoMap">
		SELECT R.BOARD_SEQ, M.GENRE_NM, M.MOVIE_NM, M.NLTY_NM, M.GRAD_NM, M.OPN, R.TITLE, R.CONTENT, R.NAME, R.REGDATE
		FROM RVBOARD R JOIN MOVIEINFO3 M
		ON R.BOARD_SEQ = M.MOVIE_SEQ;
	</select>
	
	
	
</mapper>




